{% load static %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>ProCoder | Blog Analysis </title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{% static 'plugins/fontawesome-free/css/all.min.css' %}">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="{% static 'dist/css/adminlte.min.css' %}">
  <!-- Google Font: Source Sans Pro -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
</head>
<body class="hold-transition sidebar-mini layout-fixed sidebar-collapse">
<div class="wrapper">
  {% include 'blog/base/sidebar.html' %}
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <section class="content-header">
          <div class="container-fluid">
              <div class="row mb-2">
                  <div class="col-sm-6">
                    <h1 class="m-0 text-dark">Analysis Utility</h1>
                  </div>
                  <div class="col-sm-6">
                      <ol class="breadcrumb float-sm-right">
                          <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
                          <li class="breadcrumb-item active">Analysis</li>
                      </ol>
                  </div><!-- /.col -->
              </div>
          </div><!-- /.container-fluid -->
      </section>

  <!-- Main content -->
  <section class="content">
    <div class="container-fluid">

    <div class="row">
        <div class="col sm-6">
            <!-- DONUT CHART -->
            <div class="card card-info">
                <div class="card-header">
                    <h3 class="card-title">Categories Information</h3>
                    <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                  <canvas id="doughnut-chart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                </div>
                <!-- /.card-body -->
            </div>
            <!-- /.card --> 
        </div>
       
    </div>
    <div class="row">
      
       
        

         <div class="col-12">
            <!-- BAR CHART -->
            <div class="card card-info">
                <div class="card-header">
                    <h3 class="card-title">Most Viewed Posts</h3>
                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart">
                      <canvas id="bar-chart3" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>    
                    </div>
                </div>
            <!-- /.card-body -->
            </div>
            <!-- /.card -->
        </div>
        <div class="col-12">

            <!-- BAR CHART -->
            <div class="card card-info">
                <div class="card-header">
                    <h3 class="card-title">Comments Information</h3>
                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart">
                      <canvas id="bar-chart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>    
                    </div>
                </div>
            <!-- /.card-body -->
            </div>
            <!-- /.card -->
        </div>
         <div class="col-12">
            <!-- LINE CHART -->
            <div class="card card-info">
                <div class="card-header">
                    <h3 class="card-title">Likes Information</h3>
                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart">
                      <canvas id="bar-chart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                </div>
                <!-- /.card-body -->
            </div>
            <!-- /.card -->
        </div>
        <div class="col-12">
            <!-- LINE CHART -->
            <div class="card card-info">
                <div class="card-header">
                    <h3 class="card-title">Most Posted User Information</h3>
                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart">
                      <canvas id="bar-chart4" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                </div>
                <!-- /.card-body -->
            </div>
            <!-- /.card -->
        </div>


    </div>     
    </div><!-- /.container-fluid -->
  </section>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->

{% include 'blog/base/footer.html' %}

<!-- jQuery -->
<script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>
<!-- Bootstrap 4 -->
<script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<!-- ChartJS -->
<script src="{% static 'plugins/chart.js/Chart.min.js' %}"></script>
<!-- AdminLTE App -->
<script src="{% static 'dist/js/adminlte.min.js' %}"></script>
<!-- AdminLTE for demo purposes -->
<script src="{% static 'dist/js/demo.js' %}"></script>

<script type="text/javascript">
// Bar chart
new Chart(document.getElementById("bar-chart"), {
    type: 'bar',
    /*horizontalBar*/
    data: {
      labels: [{% for i in comment_label %}"{{ i.post_title|slice:'20' }}...",{% endfor %}],
      datasets: [
        {
          fillColor : "rgba(151,187,205,0.5)",
            strokeColor : "rgba(151,187,205,1)",
            pointColor : "rgba(151,187,205,1)",
            pointStrokeColor : "#fff",
          label: "Number of comments",
          backgroundColor: "#36648b",
          data:  [{% for i in comment_data %}{{ i }},{% endfor %}],
        }
      ]
    },
    options: {
     scales: {
      yAxes: [{
        ticks: {
          beginAtZero: true,
          callback: function(value) {if (value % 1 === 0) {return value;}}
        }
      }]
    },
      legend: { display: false },
      title: {
        display: true,
        text: 'No. of comments in {{comment_data.count|safe}} posts',
      },
      responsive              : true,
      maintainAspectRatio     : false,
      datasetFill             : false
    }
});  
</script>
<script type="text/javascript">
// Bar chart
new Chart(document.getElementById("bar-chart2"), {
    type: 'bar',
    data: {
      labels: [{% for i in like_label %}"{{ i.post_title|slice:'20' }}...",{% endfor %}],
      datasets: [
        {
          fillColor : "rgba(151,187,205,0.5)",
            strokeColor : "rgba(151,187,205,1)",
            pointColor : "rgba(151,187,205,1)",
            pointStrokeColor : "#fff",
          label: "No. of Likes",
          backgroundColor: "#00688b",

          data: [{% for i in like_data %}{{ i }},{% endfor %}],
        }
      ]
    },
    options: {
     scales: {
      yAxes: [{
        ticks: {
          beginAtZero: true,
          callback: function(value) {if (value % 1 === 0) {return value;}}
        }
      }]
    },
      legend: { display: false },
      title: {
        display: true,
        text: 'No. of likes in {{like_data.count|safe}} posts',
      },
      responsive              : true,
      maintainAspectRatio     : false,
      datasetFill             : false
    }
});  
</script>
<script type="text/javascript">
// Bar chart
new Chart(document.getElementById("bar-chart3"), {
    type: 'bar',
    /*horizontalBar*/
    data: {
      labels:[{% for i in posts %}"{{ i.post_title|slice:'20' }}...",{% endfor %}],
      datasets: [
        {
          fillColor : "rgba(151,187,205,0.5)",
            strokeColor : "rgba(151,187,205,1)",
            pointColor : "rgba(151,187,205,1)",
            pointStrokeColor : "#fff",
          label: "Viewed",
          backgroundColor: "#20b2aa",
          data: {{posts_data|safe}}
        }
      ]
    },
    options: {
     scales: {
      yAxes: [{
        ticks: {
          beginAtZero: true,
          callback: function(value) {if (value % 1 === 0) {return value;}}
        }
      }]
    },
      legend: { display: false },
      title: {
        display: true,
        text: 'Most viewed {{posts.count}} Posts',
      },
      responsive              : true,
      maintainAspectRatio     : false,
      datasetFill             : false
    }
});  
</script>
<script type="text/javascript">
   
  new Chart(document.getElementById("doughnut-chart"), {
    type: 'doughnut',
    data: {
      labels:[{% for i in categorys %}"{{ i.category|slice:'20' }}...",{% endfor %}],
      datasets: [
        {
          label: "No. of Posts",
          backgroundColor:"#00b2ee",
          data: {{category_data|safe}}
        }
      ]
    },
    options: {
         maintainAspectRatio : false,
      responsive : true,
      title: {
        
        display: true,
        text: 'No. of Post In {{category_data.count}}Categories.'
      }
    }
});
</script>
<script type="text/javascript">
// Bar chart
new Chart(document.getElementById("bar-chart4"), {
    type: 'bar',
    data: {
      labels: [{% for i in user_label %}"{{ i.user.username|slice:'20' }}...",{% endfor %}],
      datasets: [
        {
          fillColor : "rgba(151,187,205,0.5)",
            strokeColor : "rgba(151,187,205,1)",
            pointColor : "rgba(151,187,205,1)",
            pointStrokeColor : "#fff",
          label: "No. of Posts",
          backgroundColor: "#43cd80",

          data: [{% for i in user_data %}{{ i }},{% endfor %}],
        }
      ]
    },
    options: {
     scales: {
      yAxes: [{
        ticks: {
          beginAtZero: true,
          callback: function(value) {if (value % 1 === 0) {return value;}}
        }
      }]
    },
      legend: { display: false },
      title: {
        display: true,
        text: 'Most {{user_data.count|safe}} Posted User ',
      },
      responsive              : true,
      maintainAspectRatio     : false,
      datasetFill             : false
    }
});  
</script>
 
</body>
</html>
